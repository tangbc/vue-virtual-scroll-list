{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 8701b4662a7b55a19a10","webpack:///external \"lodash\"","webpack:///external \"vue\"","webpack:///./src/index.js"],"names":["VirtualList","component","props","size","type","Number","required","remain","klass","String","default","onScroll","Function","computed","computedRemain","console","log","watch","reset","delta","start","end","total","keeps","viewHeight","allPadding","paddingTop","initial","data","length","methods","handleScroll","e","scrollTop","$refs","container","updateZone","offset","$options","overs","Math","floor","$emit","$forceUpdate","filter","slots","slot","index","remains","clone","benchs","round","beforeMount","render","createElement","$slots","showList","module","exports"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"vue\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"vue\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueVirtualScrollList\"] = factory(require(\"lodash\"), require(\"vue\"));\n\telse\n\t\troot[\"VueVirtualScrollList\"] = factory(root[\"lodash\"], root[\"vue\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8701b4662a7b55a19a10","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 0\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vue\"\n// module id = 1\n// module chunks = 0","import Vue from 'vue'\r\nimport _ from 'lodash'\r\n\r\nconst VirtualList = Vue.component('vue-virtual-scroll-list', {\r\n\r\n\tprops: {\r\n\t\tsize: {\r\n\t\t\ttype: Number,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tremain: {\r\n\t\t\ttype: Number,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tklass: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'virtual-scroll-list'\r\n\t\t},\r\n\t\tonScroll: Function\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tcomputedRemain() {\r\n\t\t\tconsole.log('REMAIN', this.remain)\r\n\t\t\treturn this.remain\r\n\t\t}\r\n\t},\r\n\r\n\twatch: {\r\n\t\tremain(){\r\n\t\t\tthis.reset()\r\n\t\t}\r\n\t},\r\n\r\n\t// an object helping to calculate\r\n\tdelta: {\r\n\t\tstart: 0, // start index\r\n\t\tend: 0, // end index\r\n\t\ttotal: 0, // all items count\r\n\t\tkeeps: 0, // nums of item keeping in real dom\r\n\t\tviewHeight: 0, // container wrapper viewport height\r\n\t\tallPadding: 0, // all padding of not-render-yet doms\r\n\t\tpaddingTop: 0 // container wrapper real padding-top\r\n\t},\r\n\r\n\t// an object helping to calculate\r\n\tinitial: {\r\n\t\tstart: 0, // start index\r\n\t\tend: 0, // end index\r\n\t\ttotal: 0, // all items count\r\n\t\tkeeps: 0, // nums of item keeping in real dom\r\n\t\tviewHeight: 0, // container wrapper viewport height\r\n\t\tallPadding: 0, // all padding of not-render-yet doms\r\n\t\tpaddingTop: 0 // container wrapper real padding-top\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tlength: 0\r\n\t\t}\r\n\t},\r\n\r\n\tmethods: {\r\n\t\thandleScroll (e) {\r\n\t\t\tlet scrollTop = this.$refs.container.scrollTop\r\n\r\n\t\t\tthis.updateZone(scrollTop)\r\n\r\n\t\t\tif (this.onScroll) {\r\n\t\t\t\tthis.onScroll(e, scrollTop)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tupdateZone (offset) {\r\n\t\t\tlet delta = this.$options.delta\r\n\t\t\tlet overs = Math.floor(offset / this.size)\r\n\r\n\t\t\tif (!offset) {\r\n\t\t\t\tthis.$emit('toTop')\r\n\t\t\t}\r\n\r\n\t\t\t// need moving items at lease one unit height\r\n\t\t\t// @todo: consider prolong the zone range size\r\n\t\t\tlet start = overs ? overs : 0\r\n\t\t\tlet end = overs ? (overs + delta.keeps) : delta.keeps\r\n\r\n\t\t\t// avoid overflow range\r\n\t\t\tif (overs + this.computedRemain >= delta.total) {\r\n\t\t\t\tend = delta.total\r\n\t\t\t\tstart = delta.total - delta.keeps\r\n\t\t\t\tthis.$emit('toBottom')\r\n\t\t\t}\r\n\r\n\t\t\tdelta.end = end\r\n\t\t\tdelta.start = start\r\n\r\n\t\t\t// call component to update items\r\n\t\t\tthis.$forceUpdate()\r\n\t\t},\r\n\r\n\t\tfilter (slots) {\r\n\t\t\tlet delta = this.$options.delta\r\n\t\t\tlet length = slots ? slots.length : 0\r\n\r\n\t\t\tdelta.total = length\r\n\t\t\tdelta.paddingTop = this.size * delta.start\r\n\t\t\tdelta.allPadding = this.size * (length - delta.keeps)\r\n\r\n\t\t\tif(slots){\r\n\t\t\t\treturn slots.filter((slot, index) => {\r\n\t\t\t\t\treturn index >= delta.start && index <= delta.end\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\treturn []\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\treset(){\r\n\t\t\tlet remains = this.computedRemain\r\n\t\t\tthis.$options.delta = _.clone(this.$options.initial)\r\n\t\t\tlet delta = this.$options.delta\r\n\t\t\tlet benchs = Math.round(remains / 2)\r\n\r\n\t\t\tdelta.end = remains + benchs\r\n\t\t\tdelta.keeps = remains + benchs\r\n\t\t\tdelta.viewHeight = this.size * remains\r\n\t\t}\r\n\t},\r\n\r\n\tbeforeMount () {\r\n\t\tthis.reset()\r\n\t},\r\n\r\n\trender (createElement) {\r\n\t\tlet length = 0\r\n\t\tif(this.$slots.default){\r\n\t\t\tlength = this.$slots.default.length\r\n\t\t}\r\n\t\tconsole.log('LENGTH', length, 'OLD', this.length)\r\n\t\tif(length !== this.length){\r\n\t\t\tthis.length = length\r\n\t\t\tthis.reset()\r\n\t\t}\r\n\t\tlet showList = this.filter(this.$slots.default)\r\n\t\tlet { viewHeight, paddingTop, allPadding } = this.$options.delta\r\n\r\n\t\treturn createElement('div', {\r\n\t\t\t'ref': 'container',\r\n\t\t\t'class': this.klass,\r\n\t\t\t'style': {\r\n\t\t\t\t'overflow-y': 'auto',\r\n\t\t\t\t'height': viewHeight + 'px',\r\n\t\t\t\t'scrollTop': 0\r\n\t\t\t},\r\n\t\t\t'on': {\r\n\t\t\t\t'scroll': this.handleScroll\r\n\t\t\t}\r\n\t\t}, [\r\n\t\t\tcreateElement('div', {\r\n\t\t\t\t'style': {\r\n\t\t\t\t\t'padding-top': paddingTop + 'px',\r\n\t\t\t\t\t'padding-bottom': allPadding - paddingTop + 'px'\r\n\t\t\t\t}\r\n\t\t\t}, showList)\r\n\t\t])\r\n\t}\r\n})\r\n\r\nmodule.exports = VirtualList\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}